(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),i=n(20),r=n.n(i),s=(n(31),n(25)),l=n(2),u=n(21),p=n(22),d=new(function(){function e(t){Object(u.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(p.a)(e,[{key:"_responseHandler",value:function(e){return e.ok?e.json():Promise.reject("Error happen: ".concat(e.status))}},{key:"getInitialData",value:function(){return Promise.all([this.getInitialProfile(),this.getInitialCards()])}},{key:"getInitialCards",value:function(e){return fetch("".concat(this._url,"cards"),{method:"GET",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(this._responseHandler)}},{key:"getInitialProfile",value:function(e){return fetch("".concat(this._url,"users/me"),{method:"GET",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(this._responseHandler)}},{key:"addCard",value:function(e,t){return fetch("".concat(this._url,"cards"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then(this._responseHandler)}},{key:"delCard",value:function(e,t){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then(this._responseHandler)}},{key:"changeLikeCardStatus",value:function(e,t,n){var a=t?"PUT":"DELETE";return fetch("".concat(this._url,"cards/likes/").concat(e),{method:a,headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}).then(this._responseHandler)}},{key:"setProfile",value:function(e,t){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then(this._responseHandler)}},{key:"setProfileAvatar",value:function(e,t){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then(this._responseHandler)}}]),e}())({url:"http://api.kolenhen.students.nomoredomains.icu"}),j=o.a.createContext(),h=n(3),m=n.p+"static/media/white-logo.c2821b38.svg",_=n(8);var b=function(e){var t=Object(h.h)(),n=Object(c.useState)(!0),o=Object(l.a)(n,2),i=o[0],r=o[1],s=Object(c.useState)(void 0),u=Object(l.a)(s,2),p=u[0],d=u[1];function j(){r(!i)}return Object(c.useEffect)((function(){function e(){d(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(a.jsxs)("header",{className:"header ".concat(e.loggedIn&&p<540?"header__loggedin-mob":""),children:[Object(a.jsxs)("div",{className:"header__wrap header__wrap_logo",children:[Object(a.jsx)("img",{src:m,className:"header__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),e.loggedIn&&(i?Object(a.jsx)("button",{onClick:j,className:"header__menu header__menu_bar",children:"\u2630"}):Object(a.jsx)("button",{onClick:j,className:"header__menu header__menu_close",children:"\u2573"}))]}),Object(a.jsxs)("div",{className:"header__wrap ".concat(e.loggedIn&&p<540?"header__wrap_loggedin-mob":""," header__wrap_email \n      ").concat(e.loggedIn&&p<540&&(i?"header__wrap_hide":"")),children:[e.loggedIn&&Object(a.jsx)("p",{className:"header__email",children:e.userEmail}),!e.loggedIn&&"/sign-up"===t.pathname&&Object(a.jsx)(_.b,{to:"/sign-in",className:"header__link",children:"\u0412\u043e\u0439\u0442\u0438"}),!e.loggedIn&&"/sign-in"===t.pathname&&Object(a.jsx)(_.b,{to:"/sign-up",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),e.loggedIn&&Object(a.jsx)(_.b,{to:"/sign-in",onClick:e.logOut,className:"header__link",children:"\u0412\u044b\u0439\u0442\u0438"})]})]})};var f=function(e){var t=o.a.useContext(j),n=e.card.owner._id===t._id,c=e.card.likes.some((function(e){return e._id===t._id})),i="location__trash ".concat(n?"location__trash_visible":"location__trash_invisible"),r="location__rate ".concat(c?"location__rate_marked":"");return Object(a.jsxs)("div",{className:"location",children:[Object(a.jsx)("img",{onClick:function(){e.onImgClick(e.card)},src:String(e.card.link),alt:"\u0424\u043e\u0442\u043e ".concat(e.card.name),className:"location__image"}),Object(a.jsx)("button",{type:"button",onClick:function(){e.onCardDelete(e.card)},className:i}),Object(a.jsxs)("div",{className:"location__info",children:[Object(a.jsx)("h2",{className:"location__name",children:e.card.name}),Object(a.jsxs)("div",{className:"location__wrap",children:[Object(a.jsx)("button",{type:"button",onClick:function(){e.onCardLike(e.card)},className:r}),Object(a.jsx)("span",{className:"location__likes",children:e.card.likes.length})]})]})]})};var O=function(e){var t=o.a.useContext(j);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",id:"profile",children:[Object(a.jsxs)("div",{className:"profile__overlay",children:[Object(a.jsx)("img",{src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",className:"profile__avatar"}),Object(a.jsx)("button",{className:"profile__edit-avatar",onClick:e.onEditAvatar,children:"\ud83d\udd89"})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__text",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("p",{className:"profile__role",children:t.about})]}),Object(a.jsx)("button",{className:"profile__edit-info",onClick:e.onEditProfile,children:"\ud83d\udd89"})]}),Object(a.jsx)("button",{className:"profile__add",onClick:e.onAddPlace,children:"\uff0b"})]}),Object(a.jsx)("section",{className:"locations",children:e.isCardsLoading?Object(a.jsx)("p",{className:"locations__loading",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):e.cards.map((function(t){return Object(a.jsx)(f,{card:t,onImgClick:e.onImgClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})};var g=function(){var e=new Date;return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["\xa92020 - ",e.getFullYear()," Mesto Russia"]})})};var x=function(e){return Object(a.jsx)("div",{onClick:e.onClick,className:"popup ".concat(e.isOpen&&e.card&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container popup__container_image",children:[Object(a.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__close popup__close_image",children:"\u2573"}),Object(a.jsx)("img",{src:String(e.card.link),alt:"\u0424\u043e\u0442\u043e ".concat(e.card.name),className:"popup__image"}),Object(a.jsx)("p",{className:"popup__caption",children:e.card.name})]})})};var v=function(e){return Object(a.jsx)("div",{onClick:e.onClick,className:"popup popup_type_".concat(e.name," ").concat(e.isOpen&&"popup_opened"),children:Object(a.jsxs)("form",{name:e.name,noValidate:!0,className:"popup__container popup__form popup__container_type_".concat(e.name),onSubmit:e.onSubmit,children:[Object(a.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__close popup__close_profile-".concat(e.name),children:"\u2573"}),Object(a.jsx)("h2",{className:"popup__title",children:e.title}),e.children,Object(a.jsx)("button",{type:"submit",className:"popup__btn popup__btn_type_".concat(e.name," ").concat(e.isDisabled&&"popup__btn_disabled"),children:e.btnText})]})})},C=n(11),k=n(10);function N(){var e=Object(c.useState)({}),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)({}),i=Object(l.a)(o,2),r=i[0],s=i[1],u=Object(c.useState)({}),p=Object(l.a)(u,2),d=p[0],j=p[1],h=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(e),s(t),j(n)}),[a,s,j]);return{values:n,handleChange:function(e){var t=e.target,c=t.value,o=t.name;a(Object(k.a)(Object(k.a)({},n),{},Object(C.a)({},o,c))),s(Object(k.a)(Object(k.a)({},r),{},Object(C.a)({},o,t.validationMessage))),j(t.closest("form").checkValidity())},errors:r,isValid:d,resetForm:h}}var y=function(e){var t=N(),n=t.values,o=t.handleChange,i=t.errors,r=t.isValid,s=t.resetForm,l=Object(c.useContext)(j);return Object(c.useEffect)((function(){l&&s(l)}),[l,s]),Object(a.jsx)(v,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",btnText:e.isUserSaving?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser(n)},isDisabled:!r,onClick:e.onClick,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",id:"name-input",name:"name",value:n.name||"",placeholder:"\u0418\u043c\u044f",onChange:o,className:"popup__text popup__text_type_name",required:!0,minLength:"2",maxLength:"40"}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__text-error",children:i.name||""}),Object(a.jsx)("input",{type:"text",id:"role-input",name:"about",onChange:o,placeholder:"\u0414\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",className:"popup__text popup__text_type_role",value:n.about||"",required:!0,minLength:"2",maxLength:"200"}),Object(a.jsx)("span",{id:"role-input-error",className:"popup__text-error",children:i.about||""})]})})};var S=function(e){var t=N(),n=t.values,o=t.handleChange,i=t.errors,r=t.isValid,s=t.resetForm;return Object(c.useEffect)((function(){s()}),[e.isOpen,s]),Object(a.jsx)(v,{name:"renew",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",btnText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar(n)},isDisabled:!r,onClick:e.onClick,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"url",id:"avatar-ref-input",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u043e\u0432\u044b\u0439 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0,className:"popup__text popup__text_type_ref",value:n.avatar||"",onChange:o}),Object(a.jsx)("span",{id:"avatar-ref-input-error",className:"popup__text-error",children:i.avatar||""})]})})};var w=function(e){var t=N(),n=t.values,o=t.handleChange,i=t.errors,r=t.isValid,s=t.resetForm;return Object(c.useEffect)((function(){s()}),[e.isOpen,s]),Object(a.jsx)(v,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",btnText:e.isPlaceAdding?"\u0421\u043e\u0437\u0434\u0430\u0435\u0442\u0441\u044f...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace(n)},isDisabled:!r,onClick:e.onClick,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",id:"location-name-input",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"1",maxLength:"30",className:"popup__text popup__text_type_location-name",value:n.name||"",onChange:o}),Object(a.jsx)("span",{id:"location-name-input-error",className:"popup__text-error",children:i.name||""}),Object(a.jsx)("input",{type:"url",id:"location-ref-input",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,className:"popup__text popup__text_type_ref",value:n.link||"",onChange:o}),Object(a.jsx)("span",{id:"location-ref-input-error",className:"popup__text-error",children:i.link||""})]})})};var I=function(e){return Object(a.jsx)(v,{name:"cardDel",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",btnText:e.isCardDeleting?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430",isOpen:e.isOpen,onClose:e.onClose,onSubmit:e.handleSubmit,onClick:e.onClick})};var T=function(e){return Object(a.jsx)("div",{onClick:e.onClick,className:"popup ".concat(e.isOpen&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container popup__container_tooltip",children:[Object(a.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__close popup__close_image",children:"\u2573"}),Object(a.jsx)("span",{className:"popup__info popup__info_".concat(e.type)}),Object(a.jsx)("h2",{className:"popup__title popup__title_center",children:e.message})]})})};var E=function(e){return Object(a.jsxs)("form",{onSubmit:e.onSubmit,className:"form-auth ".concat(e.name,"-auth__login"),children:[Object(a.jsx)("h2",{className:"form-auth__title",children:e.title}),e.children,Object(a.jsx)("button",{type:"submit",className:"form-auth__btn form-auth__btn_type_".concat(e.name," ").concat(e.isDisabled&&"form-auth__btn_disabled"),children:e.btnText}),Object(a.jsxs)("p",{className:"form-auth__text",children:[e.text," ",Object(a.jsx)(_.b,{className:"form-auth__link",to:"/sign-in",children:e.linkText})]})]})};var L=function(e){var t=N(),n=t.values,c=t.handleChange,o=t.errors,i=t.isValid,r=t.resetForm;return Object(a.jsx)("div",{className:"content",children:Object(a.jsx)(E,{className:"login",title:"\u0412\u0445\u043e\u0434",btnText:"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(t){t.preventDefault(),e.handleLogin(n),r()},isDisabled:i,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"email",id:"email",pattern:"^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$",name:"email",value:n.email||"",placeholder:"Email",onChange:c,className:"form-auth__input form-auth__input_type_email",required:!0,minLength:"2",maxLength:"70"}),Object(a.jsx)("span",{id:"email-input-error",className:"form-auth__input-error",children:o.email||""}),Object(a.jsx)("input",{type:"password",id:"pass",name:"password",onChange:c,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"form-auth__input form-auth__input_type_password",value:n.password||"",required:!0,minLength:"5",maxLength:"20"}),Object(a.jsx)("span",{id:"password-input-error",className:"form-auth__input-error",children:o.password||""})]})})})};var P=function(e){var t=N(),n=t.values,c=t.handleChange,o=t.errors,i=t.isValid,r=t.resetForm;return Object(a.jsx)("div",{className:"content",children:Object(a.jsx)(E,{className:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",btnText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onSubmit:function(t){t.preventDefault(),e.handleRegister(n,r)},isDisabled:i,text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",linkText:"\u0412\u043e\u0439\u0442\u0438",children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"email",id:"email",pattern:"^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$",name:"email",value:n.email||"",placeholder:"Email",onChange:c,className:"form-auth__input form-auth__input_type_email",required:!0,minLength:"2",maxLength:"70"}),Object(a.jsx)("span",{id:"email-input-error",className:"form-auth__input-error",children:o.email||""}),Object(a.jsx)("input",{type:"password",id:"pass",name:"password",onChange:c,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"form-auth__input form-auth__input_type_password",value:n.password||"",required:!0,minLength:"5",maxLength:"20"}),Object(a.jsx)("span",{id:"password-input-error",className:"form-auth__input-error",children:o.password||""})]})})})},D=n(24),A=function(e){var t=e.component,n=Object(D.a)(e,["component"]);return Object(a.jsx)(h.b,{children:function(){return n.loggedIn?Object(a.jsx)(t,Object(k.a)({},n)):Object(a.jsx)(h.a,{to:"/sign-in"})}})},z="http://api.kolenhen.students.nomoredomains.icu";var F=function(){var e=Object(h.g)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),o=n[0],i=n[1],r=Object(c.useState)(!1),u=Object(l.a)(r,2),p=u[0],m=u[1],_=Object(c.useState)(!1),f=Object(l.a)(_,2),v=f[0],C=f[1],k=Object(c.useState)(!1),N=Object(l.a)(k,2),E=N[0],D=N[1],F=Object(c.useState)(!1),B=Object(l.a)(F,2),H=B[0],q=B[1],U=Object(c.useState)(!1),V=Object(l.a)(U,2),J=V[0],Z=V[1],G=Object(c.useState)(!1),M=Object(l.a)(G,2),R=M[0],$=M[1],W=Object(c.useState)(!1),Y=Object(l.a)(W,2),K=Y[0],Q=Y[1],X=Object(c.useState)(!1),ee=Object(l.a)(X,2),te=ee[0],ne=ee[1],ae=Object(c.useState)(!1),ce=Object(l.a)(ae,2),oe=ce[0],ie=ce[1],re=Object(c.useState)(!1),se=Object(l.a)(re,2),le=se[0],ue=se[1],pe=Object(c.useState)({}),de=Object(l.a)(pe,2),je=de[0],he=de[1],me=Object(c.useState)({}),_e=Object(l.a)(me,2),be=_e[0],fe=_e[1],Oe=Object(c.useState)([]),ge=Object(l.a)(Oe,2),xe=ge[0],ve=ge[1],Ce=Object(c.useState)({}),ke=Object(l.a)(Ce,2),Ne=ke[0],ye=ke[1],Se=Object(c.useState)(""),we=Object(l.a)(Se,2),Ie=we[0],Te=we[1],Ee=Object(c.useState)(""),Le=Object(l.a)(Ee,2),Pe=Le[0],De=Le[1],Ae=Object(c.useState)(""),ze=Object(l.a)(Ae,2),Fe=ze[0],Be=ze[1];function He(e){e.target===e.currentTarget&&Ue()}function qe(){ie(!oe)}function Ue(){i(!1),m(!1),C(!1),D(!1),q(!1),ie(!1),he({})}Object(c.useEffect)((function(){var e=localStorage.getItem("jwt");Z(!0),d.getInitialCards(e).then((function(e){ve(e)})).catch((function(e){alert(e)})).finally((function(){Z(!1)}))}),[]),Object(c.useEffect)((function(){var e=localStorage.getItem("jwt");d.getInitialProfile(e).then((function(e){fe(e)})).catch((function(e){alert(e)}))}),[]),Object(c.useEffect)((function(){function e(e){"Escape"===e.key&&Ue()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var Ve=Object(c.useCallback)((function(){if(localStorage.getItem("jwt")){var t=localStorage.getItem("jwt");t&&(n=t,fetch("".concat(z,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(e){return e}))).then((function(t){t&&(Be(t.data.email),ue(!0),e.push("/"))}))}var n}),[e,ue,Be]);return Object(c.useEffect)((function(){localStorage.getItem("jwt")&&Ve()}),[Ve]),Object(a.jsxs)(j.Provider,{value:be,children:[Object(a.jsx)(b,{loggedIn:le,logOut:function(){ue(!1),localStorage.removeItem("jwt"),e.push("/sign-in")},userEmail:Fe}),Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{path:"/sign-up",children:Object(a.jsx)(P,{onTooltipOpen:qe,message:Te,type:De,handleRegister:function(t,n){var a;(a=t,fetch("".concat(z,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){return console.log(e)}))).then((function(t){t?(qe(),Te("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),De("positive"),e.push("/sign-in"),n()):(Te("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),De("negative"),qe())}))}})}),Object(a.jsx)(h.b,{path:"/sign-in",children:Object(a.jsx)(L,{handleLogin:function(t){var n;t.email&&t.password&&(n=t,fetch("".concat(z,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,password:n.password})}).then((function(e){return e.json()})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e})).catch((function(e){return console.log(e)}))).then((function(t){t&&(ue(!0),e.push("/"))})).catch((function(e){return console.log(e)}))}})}),Object(a.jsx)(A,{path:"/",component:O,loggedIn:le,onEditProfile:function(){i(!o)},onAddPlace:function(){m(!p)},onEditAvatar:function(){C(!v)},onImgClick:function(e){D(!E),he(e)},isCardsLoading:J,onCardLike:function(e){var t=localStorage.getItem("jwt"),n=e.likes.some((function(e){return e._id===be._id}));d.changeLikeCardStatus(e._id,!n,t).then((function(t){var n=xe.map((function(n){return n._id===e._id?t:n}));ve(n)})).catch((function(e){alert(e)}))},onCardDelete:function(e){ye(e),q(!H)},cards:xe})]}),Object(a.jsx)(g,{}),Object(a.jsx)(y,{isOpen:o,onClose:Ue,onUpdateUser:function(e){var t=localStorage.getItem("jwt");$(!0),d.setProfile(e,t).then((function(e){fe(e),Ue()})).catch((function(e){alert(e)})).finally((function(){$(!1)}))},onClick:He,isUserSaving:R}),Object(a.jsx)(S,{isOpen:v,onClose:Ue,onUpdateAvatar:function(e){var t=localStorage.getItem("jwt");d.setProfileAvatar(e,t).then((function(e){fe(e),Ue()})).catch((function(e){alert(e)}))},onClick:He}),Object(a.jsx)(w,{isOpen:p,onClose:Ue,onAddPlace:function(e){var t=localStorage.getItem("jwt");ne(!0),d.addCard(e,t).then((function(e){ve([e].concat(Object(s.a)(xe))),Ue()})).catch((function(e){alert(e)})).finally((function(){ne(!1)}))},onClick:He,isPlaceAdding:te}),Object(a.jsx)(I,{isOpen:H,onClose:Ue,handleSubmit:function(e){e.preventDefault();var t=localStorage.getItem("jwt");Q(!0),d.delCard(Ne._id,t).then((function(){var e=xe.filter((function(e){return e!==Ne}));ve(e),q(!1)})).catch((function(e){alert(e)})).finally((function(){Q(!1)}))},onClick:He,isCardDeleting:K}),Object(a.jsx)(x,{card:je,isOpen:E,onClose:Ue,onClick:He}),Object(a.jsx)(T,{type:Pe,isOpen:oe,onClose:Ue,onClick:He,message:Ie})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(_.a,{children:Object(a.jsx)(F,{})})}),document.getElementById("root")),B()}},[[37,1,2]]]);
//# sourceMappingURL=main.716f2a80.chunk.js.map